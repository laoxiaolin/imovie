| john Lee | project: Movie | start: 2017-5-3

### 2017-5-3

## 1.增加电影模块
  | 功能 | 增添删改；列表；详情 |

## 2.增加会员模块
  | 功能 | 注册、登陆、登陆session固化保存 |

## 3.增加电影分类模块
  | 功能 | 1、增添删改；2、加入到电影添加页面 |
  
  | 问题 | 1、更新电影分类时（修改电影分类、删除电影），旧分类中movies字段未更新数据 |

## 4.增加用户权限判断中间件
  | 功能 | 1、判断用户是否登陆中间件；2、判断用户role的值，来判断相应的等级，其中大于50的为Amdin |

## 5.增加前台按照分类查看电影列表
  | 功能 | 分类查看电影列表，并在列表页增加分类功能 |


### 2017-5-4

## 1.增加前台电影搜索功能

## 2.增加本地海报图片上传功能和pv统计功能

## 3.增加测试环节，采用gulp-mocha+should的方法进行测试




## 需要增加的功能
### 已完成
  ### 2017-5-5
    | 用户模块 |
       - 修改注册会员所需要的信息，增加邮箱、手机、登陆次数、注册ip、注册时间、最后一个登陆IP字段、最后一次登陆时间等字段
       - 实现会员注册、登陆时更新数据库相关属性

    | 前台显示 |
      - 优化排序功能，按照_id倒序显示，最新的排在最前面

### 未完成
  | 后台显示 |
    - 用户列表、电影列表增加翻页功能 

  | 用户模块 |
    - 系统： 0.利用邮箱地址进行登陆判定；1.会员注册验证功能；2.会员积分系统；

    - 数据库：增加{可用余额(availableBalance)， 充值总额(totalRecharge)， Vip状态（vipStatus）[0:非会员（Non-members），1:会员（members），2:已过期会员（Expired）]， Vip会员(VIP){会员开始时间(createAt)；会员类别(Level)：[1天（15元包天）, 7天（30元包7天）, 30天（50元包30天）]}， 订单集合(Orders)

    - 页面：front{增加：用户管理页面，  ，充值页面， 充值记录查询页面， 消费记录查询页面}

  | 充值模块 |
    - 1.会员充值；2.充值查询；3.余额查询；4.vip会员日期
    充值：设置10元、30元、50元三个充值档，然后可以根据片子设置的价格扣费（最低5元一部）。
    充值订单集合：订单状态(status)[0;未支付(unpaid)， 1:支付成功(paySuccess)， 2:支付失败(payFailed
)]，充值日期(CreateAt)，交易类型(transactionType)：[0:VIP会员(vip)，1:充值(Recharge)]，充值金额(totalRecharge)，支付时间（payTime），支付方式（payChannel）:[0:微信， 1:支付宝], 充值人(user)

    消费记录集合：消费日期，消费金额，消费人

  | 电影模块 | 1.60秒试看功能； 2.爬虫系统；3.增加价格字段(完成)

  | 支付模块 | 

## 1.增加注册验证功能，


 用户模块 - 修改注册会员所需要的信息，增加邮箱、手机、登陆次数、注册ip、注册时间、最后一个登陆IP字段、最后一次登陆时间等字段；2、实现会员注册、登陆时更新数据库相关属性；前台显示 - 优化排序功能，按照_id倒序显示，最新的排在最前面
